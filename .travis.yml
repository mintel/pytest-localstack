language: python
services:
  - docker

python:
  - '2.7'
  - '3.4'
  - '3.5'
  - '3.6'
  - '3.7-dev'
  - 'pypy'
  - 'pypy3'

stages:
  - test
  - lint

jobs:
  include:
    - stage: test
      after_success:
        - codecov
    - stage: lint
      python: '3.6'
      env: TOXENV=lint
      services: []

install: pip install --upgrade tox tox-travis codecov
script: tox --recreate


matrix:
  fast_finish: true
  allow_failures:
    - python: "3.7-dev"
